---
page_title: "thalassa_kubernetes_cluster_role Resource - terraform-provider-thalassa"
subcategory: "Kubernetes IAM"
description: |-
  Manages a Kubernetes cluster role for IAM access control. This resource allows you to create, update, and delete Kubernetes cluster roles with associated permission rules.
---

# thalassa_kubernetes_cluster_role (Resource)

Manages a Kubernetes cluster role for IAM access control. This resource allows you to create, update, and delete Kubernetes cluster roles with associated permission rules.

## Important Notes

- **Permission Rules**: Each rule defines access to specific Kubernetes resources with specific verbs (actions)
- **API Groups**: Rules can target specific API groups (e.g., `apps`, `extensions`) or all groups with `*`
- **Resource Names**: You can restrict access to specific named resources using the `resource_names` field
- **Non-Resource URLs**: For non-resource endpoints like `/healthz`, use the `non_resource_urls` field
- **System Roles**: System roles are managed by Thalassa Cloud and cannot be modified

## Example Usage

```terraform
# Create a Kubernetes cluster role for application developers
resource "thalassa_kubernetes_cluster_role" "app_developer" {
  name        = "app-developer"
  description = "Role for application developers with read/write access to applications"

  labels = {
    "team"        = "development"
    "environment" = "production"
  }

  annotations = {
    "managed-by" = "terraform"
  }

  rules {
    resources  = ["pods", "services", "deployments", "configmaps", "secrets"]
    verbs      = ["get", "list", "watch", "create", "update", "delete", "patch"]
    api_groups = ["", "apps"]
    note       = "Full access to application resources"
  }

  rules {
    resources  = ["pods/log"]
    verbs      = ["get", "list"]
    api_groups = [""]
    note       = "Access to pod logs"
  }
}

# Create a read-only cluster role for monitoring
resource "thalassa_kubernetes_cluster_role" "monitoring" {
  name        = "monitoring-readonly"
  description = "Read-only role for monitoring and observability tools"

  labels = {
    "team"    = "platform"
    "purpose" = "monitoring"
  }

  rules {
    resources  = ["*"]
    verbs      = ["get", "list", "watch"]
    api_groups = ["*"]
    note       = "Read-only access to all resources for monitoring"
  }

  rules {
    resources  = ["nodes", "nodes/metrics", "nodes/stats"]
    verbs      = ["get", "list"]
    api_groups = [""]
    note       = "Access to node metrics and stats"
  }
}

# Create a cluster role for database administrators
resource "thalassa_kubernetes_cluster_role" "db_admin" {
  name        = "database-administrator"
  description = "Role for database administrators with access to database-related resources"

  labels = {
    "team" = "database"
    "tier" = "critical"
  }

  rules {
    resources      = ["pods", "services", "configmaps", "secrets", "persistentvolumes", "persistentvolumeclaims"]
    verbs          = ["get", "list", "watch", "create", "update", "delete", "patch"]
    api_groups     = ["", "apps"]
    resource_names = ["postgres-*", "mysql-*", "redis-*"]
    note           = "Access to database-related resources"
  }

  rules {
    resources      = ["pods/exec"]
    verbs          = ["create"]
    api_groups     = [""]
    resource_names = ["postgres-*", "mysql-*", "redis-*"]
    note           = "Execute commands in database pods"
  }
}
```
<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `name` (String) The name of the Kubernetes cluster role

### Optional

- `annotations` (Map of String) Annotations for the Kubernetes cluster role
- `description` (String) A human-readable description of the Kubernetes cluster role
- `labels` (Map of String) Labels for the Kubernetes cluster role
- `organisation_id` (String) Reference to the Organisation of the Kubernetes Cluster Role. If not provided, the organisation of the (Terraform) provider will be used.
- `rules` (Block List) List of permission rules for this Kubernetes cluster role (see [below for nested schema](#nestedblock--rules))

### Read-Only

- `created_at` (String) The timestamp when the Kubernetes cluster role was created
- `id` (String) The unique identifier of the Kubernetes cluster role
- `slug` (String) The slug of the Kubernetes cluster role
- `system` (Boolean) Whether this is a system role
- `updated_at` (String) The timestamp when the Kubernetes cluster role was last updated

<a id="nestedblock--rules"></a>
### Nested Schema for `rules`

Required:

- `resources` (List of String) List of resources that the rule applies to
- `verbs` (List of String) List of verbs that the rule applies to

Optional:

- `api_groups` (List of String) List of API groups that the rule applies to
- `non_resource_urls` (List of String) List of non-resource URLs that the rule applies to
- `note` (String) A human-readable note for the permission rule
- `resource_names` (List of String) List of resource names that the rule applies to

Read-Only:

- `id` (String) The unique identifier of the permission rule


