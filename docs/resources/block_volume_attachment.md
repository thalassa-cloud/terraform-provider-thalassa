---
page_title: "thalassa_block_volume_attachment Resource - terraform-provider-thalassa"
subcategory: "Storage"
description: |-
  Attach a block volume to a virtual machine. Volume must not be attached to another virtual machine.
---

# thalassa_block_volume_attachment (Resource)

Attach a block volume to a virtual machine. Volume must not be attached to another virtual machine.

## Example Usage

```terraform
# Create a VPC for the resources
resource "thalassa_vpc" "example" {
  name        = "example-vpc"
  description = "Example VPC for block volume attachment"
  region      = "nl-01"
  cidrs       = ["10.0.0.0/16"]
}

# Create a subnet for the resources
resource "thalassa_subnet" "example" {
  name        = "example-subnet"
  description = "Example subnet for block volume attachment"
  vpc_id      = thalassa_vpc.example.id
  cidr        = "10.0.1.0/24"
}

# Create a block volume
resource "thalassa_block_volume" "example" {
  name        = "example-block-volume"
  description = "Example block volume for attachment"
  region      = "nl-01"
  volume_type = "Block" # Available: Block, Premium Block
  size_gb     = 50
}

# Create a virtual machine instance
resource "thalassa_virtual_machine_instance" "example" {
  name                = "example-instance"
  subnet_id           = thalassa_subnet.example.id
  machine_type        = "pgp-small" # Available: pgp-small, pgp-medium, pgp-large, pgp-xlarge, pgp-2xlarge, pgp-4xlarge, dgp-small, dgp-medium, dgp-large, dgp-xlarge, dgp-2xlarge, dgp-4xlarge
  machine_image       = "ubuntu-22.04"
  availability_zone   = "nl-01a" # Available: nl-01a, nl-01b, nl-01c
  root_volume_size_gb = 20
  root_volume_type    = "Block" # Available: Block, Premium Block
}

# Create a block volume attachment with Thalassa default values
resource "thalassa_block_volume_attachment" "example" {
  volume_id = thalassa_block_volume.example.id
  vmi_id    = thalassa_virtual_machine_instance.example.id
}

# Output the attachment details
output "attachment_id" {
  value = thalassa_block_volume_attachment.example.id
}

output "device_serial" {
  value = thalassa_block_volume_attachment.example.serial
}
```
<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `vmi_id` (String) The ID of the virtual machine to attach the volume to
- `volume_id` (String) The ID of the volume to attach

### Optional

- `organisation_id` (String) Reference to the Organisation of the Volume Attachment. If not provided, the organisation of the (Terraform) provider will be used.
- `wait_for_attached` (Boolean) Wait for the volume to be attached to the virtual machine. If false, the volume will be attached and the resource will be marked as created, but the volume may not be attached to the virtual machine yet.
- `wait_for_attached_timeout` (Number) The timeout in minutes to wait for the volume to be attached to the virtual machine. Only used if wait_for_attached is true. If not provided, the default timeout of 5 minutes will be used.
- `wait_for_detached` (Boolean) Wait for the volume to be detached from the virtual machine. If false, the volume will be detached and the resource will be marked as deleted, but the volume may not be detached from the virtual machine yet.
- `wait_for_detached_timeout` (Number) The timeout in minutes to wait for the volume to be detached from the virtual machine. Only used if wait_for_detached is true. If not provided, the default timeout of 5 minutes will be used.

### Read-Only

- `id` (String) The ID of this resource.
- `serial` (String) The device name to use for the volume attachment (e.g., /dev/sdb)

 