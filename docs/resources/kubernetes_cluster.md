---
page_title: "thalassa_kubernetes_cluster Resource - terraform-provider-thalassa"
subcategory: "Kubernetes"
description: |-
  Manages a Kubernetes cluster in the Thalassa cloud platform. This resource supports both managed clusters and hosted control plane clusters, allowing you to deploy production-ready Kubernetes environments with configurable networking, security policies, and auto-upgrade capabilities. The cluster can be customized with specific CNI plugins (Cilium or custom), network CIDRs, pod security standards, audit logging, and API server access controls.
---

# thalassa_kubernetes_cluster (Resource)

Manages a Kubernetes cluster in the Thalassa cloud platform. This resource supports both managed clusters and hosted control plane clusters, allowing you to deploy production-ready Kubernetes environments with configurable networking, security policies, and auto-upgrade capabilities. The cluster can be customized with specific CNI plugins (Cilium or custom), network CIDRs, pod security standards, audit logging, and API server access controls.

## Cluster Types

### Managed Clusters (Default)
- **Requires**: `subnet_id` - Must specify a subnet for node deployment
- **Use case**: Production workloads requiring full control
- **Features**: Complete control over node pools and configuration

### Hosted Control Plane Clusters
- **Requires**: `region` - Must specify a region for deployment  
- **Use case**: Development and testing environments
- **Features**: Thalassa manages the control plane components

## Important Notes

- **`cluster_version` is optional** - If not specified, the latest stable version is used
- **`networking_cni` defaults to "cilium"**
- **Network CIDRs cannot be changed** after creation (ForceNew)
- **Cluster type cannot be changed** after creation (ForceNew)

## Security Configuration

- **Pod Security Standards**: `restricted` (most secure), `baseline` (default), `privileged`
- **Network Policies**: `deny-all` (default), `allow-all`, or custom policies
- **API Server ACLs**: Restrict API server access to specific CIDR blocks

## Example Usage

```terraform
# Create a VPC for the Kubernetes cluster
resource "thalassa_vpc" "example" {
  name        = "example-vpc"
  description = "Example VPC for Kubernetes cluster"
  region      = "nl-01"
  cidrs       = ["10.0.0.0/16"]
}

# Create a subnet for the Kubernetes cluster
resource "thalassa_subnet" "example" {
  name        = "example-subnet"
  description = "Example subnet for Kubernetes cluster"
  vpc_id      = thalassa_vpc.example.id
  cidr        = "10.0.1.0/24"
}

# Create a Kubernetes cluster
resource "thalassa_kubernetes_cluster" "example" {
  name        = "example-kubernetes-cluster"
  description = "Example Kubernetes cluster"
  region      = "nl-01"
  subnet_id   = thalassa_subnet.example.id
  api_server_acls {
    allowed_cidrs = ["10.0.0.0/16", "10.0.1.0/24"]
  }
}

# Create a Kubernetes node pool with Thalassa default values
resource "thalassa_kubernetes_node_pool" "example" {
  name              = "example-node-pool"
  cluster_id        = thalassa_kubernetes_cluster.example.id
  subnet_id         = thalassa_subnet.example.id
  availability_zone = "nl-01a"
  machine_type      = "pgp-small"
  # replicas              = 2
  enable_autoscaling = true
  min_replicas       = 1
  max_replicas       = 2
  # kubernetes_version    = "1-34-1"
}

# Output the Kubernetes cluster details
output "kubernetes_cluster_id" {
  value = thalassa_kubernetes_cluster.example.id
}

output "kubernetes_cluster_name" {
  value = thalassa_kubernetes_cluster.example.name
}

# # Output the node pool details
output "node_pool_id" {
  value = thalassa_kubernetes_node_pool.example.id
}

output "node_pool_name" {
  value = thalassa_kubernetes_node_pool.example.name
}
```
<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `name` (String) Name of the Kubernetes Cluster

### Optional

- `annotations` (Map of String) Annotations for the Kubernetes Cluster
- `api_server_acls` (Block List, Max: 10) API server ACLs for the Kubernetes Cluster (see [below for nested schema](#nestedblock--api_server_acls))
- `audit_log_profile` (String) Audit log profile of the Kubernetes Cluster. Must be one of: none, basic, advanced. Default: none.
- `auto_upgrade_policy` (String) Auto upgrade policy of the Kubernetes Cluster. Must be one of: none, latest-version, latest-stable. Default: none.
- `cluster_type` (String) Cluster type of the Kubernetes Cluster. Must be one of: managed, hosted-control-plane. Default: managed.
- `cluster_version` (String) Cluster version of the Kubernetes Cluster, can be a name, slug or identity of the Kubernetes version. If not provided, the latest stable version will be used for provisioning.
- `default_network_policy` (String) Default network policy of the Kubernetes Cluster. Must be one of: allow-all, deny-all. Default: deny-all.
- `delete_protection` (Boolean) Delete protection of the Kubernetes Cluster
- `description` (String) A human readable description about the Kubernetes Cluster
- `disable_public_endpoint` (Boolean) Disable public endpoint of the Kubernetes Cluster. When set to true, the Kubernetes Cluster will only be accessible via the private VPC endpoint and the user will need to provide a solution to access the Kubernetes API server.
- `labels` (Map of String) Labels for the Kubernetes Cluster
- `maintenance_day` (Number) Day of the week when the cluster will be upgraded (0-6, where 0 is Sunday)
- `maintenance_start_at` (Number) Time of day when the cluster will be upgraded in minutes from midnight (0-1439)
- `networking_cni` (String) CNI of the Kubernetes Cluster
- `networking_pod_cidr` (String) Pod CIDR of the Kubernetes Cluster. Must be a valid CIDR block.
- `networking_service_cidr` (String) Service CIDR of the Kubernetes Cluster. Must be a valid CIDR block.
- `organisation_id` (String) Reference to the Organisation of the Kubernetes Cluster. If not provided, the organisation of the (Terraform) provider will be used.
- `pod_security_standards_profile` (String) Pod security standards profile of the Kubernetes Cluster. Must be one of: restricted, baseline, privileged. Default: baseline.
- `region` (String) Region of the Kubernetes Cluster. Required for hosted-control-plane clusters.
- `security_group_attachments` (List of String) List identities of security group that will be attached to the Kubernetes Cluster
- `subnet_id` (String) Subnet of the Kubernetes Cluster. Required for managed clusters.

### Read-Only

- `id` (String) The ID of this resource.
- `kubernetes_api_server_ca_certificate` (String) Kubernetes API server CA certificate of the Kubernetes Cluster
- `kubernetes_api_server_endpoint` (String) Kubernetes API server endpoint of the Kubernetes Cluster
- `slug` (String)
- `status` (String) Status of the Kubernetes Cluster
- `vpc_id` (String) VPC of the Kubernetes Cluster. This is automatically set when a subnet is provided.

<a id="nestedblock--api_server_acls"></a>
### Nested Schema for `api_server_acls`

Optional:

- `allowed_cidrs` (List of String) List of allowed CIDRs for API server access


