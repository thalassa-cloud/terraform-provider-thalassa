---
page_title: "thalassa_dbaas_db_cluster Resource - terraform-provider-thalassa"
subcategory: "Database"
description: |-
  Create an DB Cluster
---

# thalassa_dbaas_db_cluster (Resource)

Create an DB Cluster

## Example Usage

```terraform
# Create a VPC for the database cluster
resource "thalassa_vpc" "example" {
  name        = "example-vpc"
  description = "Example VPC for database cluster"
  region      = "nl-01"
  cidrs       = ["10.0.0.0/16"]
}

# Create a subnet for the database cluster
resource "thalassa_subnet" "example" {
  name        = "example-subnet"
  description = "Example subnet for database cluster"
  vpc_id      = thalassa_vpc.example.id
  cidr        = "10.0.1.0/24"
}

# Create a security group for the DB cluster
resource "thalassa_security_group" "example" {
  name         = "example-db-security-group"
  description  = "Example security group for DB cluster"
  vpc_identity = thalassa_vpc.example.id
}

# Create a database cluster with Thalassa default values
resource "thalassa_dbaas_db_cluster" "example" {
  name                   = "example-db-cluster"
  description            = "Example database cluster for documentation"
  subnet_id              = thalassa_subnet.example.id
  database_instance_type = "db-pgp-small" # Available: db-pgp-small, db-pgp-medium, db-pgp-large, db-pgp-xlarge, db-pgp-2xlarge, db-pgp-4xlarge, db-dgp-small, db-dgp-medium, db-dgp-large, db-dgp-xlarge, db-dgp-2xlarge, db-dgp-4xlarge
  engine                 = "postgres"
  engine_version         = "15.13"
  allocated_storage      = 100
  volume_type_class      = "block"
}

# Output the database cluster details
output "db_cluster_id" {
  value = thalassa_dbaas_db_cluster.example.id
}

output "db_cluster_name" {
  value = thalassa_dbaas_db_cluster.example.name
}

output "db_cluster_endpoint" {
  value = thalassa_dbaas_db_cluster.example.endpoint_ipv4
}

output "db_cluster_port" {
  value = thalassa_dbaas_db_cluster.example.port
}
```
<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `allocated_storage` (Number) Amount of storage allocated to the cluster in GB
- `database_instance_type` (String) Database instance type of the DB Cluster
- `engine` (String) Database engine of the cluster
- `engine_version` (String) Version of the database engine
- `name` (String) Name of the DB Cluster
- `subnet_id` (String) Subnet of the DB Cluster
- `volume_type_class` (String) Storage type used to determine the size of the cluster storage

### Optional

- `annotations` (Map of String) Annotations of the DB Cluster
- `auto_minor_version_upgrade` (Boolean) Flag indicating if the cluster should automatically upgrade to the latest minor version
- `auto_upgrade_policy` (String) Auto upgrade policy for the cluster. Options: 'none', 'latest-version', 'latest-stable', 'latest-patch', 'latest-minor', 'latest-major'
- `delete_protection` (Boolean) Flag indicating if the cluster should be protected from deletion
- `description` (String) Description of the DB Cluster
- `init_db` (Map of String) Map of init db parameters
- `labels` (Map of String) Labels of the DB Cluster
- `maintenance_day` (Number) Day of the week for the maintenance window. 0 is Sunday, 6 is Saturday
- `maintenance_start_at` (Number) Start time of the maintenance window on the maintenance day in UTC. 0 is 00:00, 23 is 23:00
- `organisation_id` (String) Reference to the Organisation of the Db Cluster. If not provided, the organisation of the (Terraform) provider will be used.
- `parameters` (Map of String) Map of parameter name to database engine specific parameter value
- `provision_db_object_store` (Boolean) Flag to indicate if the DB object store should be provisioned for the cluster. If true, restore_from_backup_id will be ignored.
- `replicas` (Number) Number of instances in the cluster
- `restore_from_backup_id` (String) Identity of the DB object store used for barman backups (optional). Ignored if provision_db_object_store is true.
- `restore_recovery_target` (Block List, Max: 1) Recovery target for Point-In-Time Recovery (PITR). Only used when restore_from_backup_id is specified. (see [below for nested schema](#nestedblock--restore_recovery_target))
- `security_groups` (List of String) List of security groups associated with the cluster

### Read-Only

- `endpoint_ipv4` (String) IPv4 address of the cluster endpoint
- `endpoint_ipv6` (String) IPv6 address of the cluster endpoint
- `id` (String) The ID of this resource.
- `port` (Number) Port of the cluster endpoint
- `status` (String) Status of the cluster

<a id="nestedblock--restore_recovery_target"></a>
### Nested Schema for `restore_recovery_target`

Optional:

- `target_lsn` (String) Log Sequence Number to restore to. Example: '0/1234567'
- `target_time` (String) Timestamp to restore to (RFC3339 format). Example: '2023-12-25T10:00:00Z'

 